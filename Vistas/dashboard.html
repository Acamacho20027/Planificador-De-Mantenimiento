<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard - Planificador de Mantenimiento</title>
    <link rel="stylesheet" href="../Styles/styles.css">
    <link rel="stylesheet" href="../Styles/custom-dashboard.css">
    <link rel="stylesheet" href="../Styles/design-tokens.css">
    <link rel="stylesheet" href="../Styles/visual-overrides.css">
    <link rel="stylesheet" href="../Styles/mobile-nav.css">
</head>
<body>
    <header class="padding-global">
        <div class="container-large">
            <h1 class="heading-style-h1">Dashboard</h1>
        </div>
    </header>

    <main class="padding-global padding-section-large">
        <div class="container-large dashboard-wrapper">
            <!-- top navigation bar -->
            <button id="nav-toggle" aria-label="Abrir menú" style="background:transparent;border:none;cursor:pointer;" aria-expanded="false">
                <!-- SVG hamburger with thicker bars for better visibility on mobile/Safari -->
                <svg width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <rect x="0" y="0" width="28" height="3" rx="1.5" fill="currentColor" />
                    <rect x="0" y="8.5" width="28" height="3" rx="1.5" fill="currentColor" />
                    <rect x="0" y="17" width="28" height="3" rx="1.5" fill="currentColor" />
                </svg>
            </button>
            <aside class="dashboard-nav">
                <h3 class="heading-style-h3">Menú</h3>
                <nav>
                    <ul>
                        <li><a href="#home" class="dashboard-link" data-view="home">Home</a></li>
                        <li><a href="inspeccion.html" class="dashboard-link">Inspección</a></li>
                        <li><a href="#tasks" class="dashboard-link" data-view="tasks">Tareas</a></li>
                        <li><a href="#admin" class="dashboard-link" data-view="admin">Administración</a></li>
                        <li class="nav-mobile-only">
                            <button type="button" id="menu-logout" class="dashboard-link logout-link">
                                <img src="/imagenes/icon-logout.svg" aria-hidden="true" style="height:16px;width:16px;filter:invert(1) grayscale(1) contrast(100%);">Cerrar sesión
                            </button>
                        </li>
                    </ul>
                </nav>
            </aside>

            <section class="dashboard-content">
                <div id="view-home" class="dashboard-view">
                    <div class="charts-grid">
                        <div class="chart-card" id="card-done" style="display:none;">
                            <h4>Completadas</h4>
                            <div class="chart-visual" id="visual-done">
                                <!-- python-generated image for done state -->
                                <img src="/charts/state_done.png" alt="Completadas" style="width:100%;margin-top:.5rem;display:none;" id="img-state-done"/>
                            </div>
                            <div class="chart-meta"><span class="detail-accent" id="meta-done-count">0</span> tareas — <span id="meta-done-pct">0%</span></div>
                        </div>
                        <div class="chart-card" id="card-progress" style="display:none;">
                            <h4>En progreso</h4>
                            <div class="chart-visual" id="visual-progress">
                                <img src="/charts/state_in_progress.png" alt="En progreso" style="width:100%;margin-top:.5rem;display:none;" id="img-state-progress"/>
                            </div>
                            <div class="chart-meta"><span class="detail-accent" id="meta-progress-count">0</span> tareas — <span id="meta-progress-pct">0%</span></div>
                        </div>
                        <div class="chart-card" id="card-notstarted" style="display:none;">
                            <h4>No iniciadas</h4>
                            <div class="chart-visual" id="visual-notstarted">
                                <img src="/charts/state_not_started.png" alt="No iniciadas" style="width:100%;margin-top:.5rem;display:none;" id="img-state-notstarted"/>
                            </div>
                            <div class="chart-meta"><span class="detail-accent" id="meta-notstarted-count">0</span> tareas — <span id="meta-notstarted-pct">0%</span></div>
                        </div>
                    </div>
                </div>

                
                                <!-- Inspección moved to separate page (inspeccion.html) -->

                <div id="view-tasks" class="dashboard-view" style="display:none;">
                    <h3>Tareas</h3>
                    <div id="tasks-container">
                        <p>Cargando tareas...</p>
                    </div>
                </div>

                <div id="view-admin" class="dashboard-view" style="display:none;">
                    <h3>Administración de Usuarios</h3>
                    <div class="admin-mobile-logout">
                        <button type="button" id="admin-mobile-logout" class="admin-mobile-logout-btn">
                            <img src="/imagenes/icon-logout.svg" aria-hidden="true" style="height:16px;width:16px;filter:invert(1) grayscale(1) contrast(100%);">Cerrar sesión
                        </button>
                    </div>
                    <form id="form-crear-usuario" style="display:flex; gap:8px; align-items:flex-end; flex-wrap:wrap;">
                        <div>
                            <label for="nuevo-email">Email</label>
                            <input name="email" type="email" id="nuevo-email" required placeholder="usuario@empresa.com" />
                        </div>
                        <div>
                            <label for="nuevo-nombre">Nombre</label>
                            <input name="nombre" type="text" id="nuevo-nombre" placeholder="Nombre completo" />
                        </div>
                        <div>
                            <label for="nuevo-telefono">Teléfono</label>
                            <input name="telefono" type="tel" id="nuevo-telefono" placeholder="+1 234 567 8900" />
                        </div>
                        <div>
                            <label for="nuevo-rol">Rol</label>
                            <select name="rol" id="nuevo-rol"><option value="Usuario">Usuario</option><option value="Administrador">Administrador</option></select>
                        </div>
                        <button type="submit" class="button_top">Crear usuario</button>
                    </form>
                    <div id="lista-usuarios-admin" style="margin-top:12px;"></div>
                </div>
            </section>
        </div>
    </main>

    <script src="../js/preview.js"></script>
    <script src="../js/dashboard.js"></script>
    <script src="../js/protect-dashboard.js"></script>
</body>
</html>
