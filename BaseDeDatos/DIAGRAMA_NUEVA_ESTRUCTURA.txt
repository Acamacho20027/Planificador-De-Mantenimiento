â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    DIAGRAMA DE BASE DE DATOS - NUEVA ESTRUCTURA                       â•‘
â•‘                      PLANIFICADOR DE MANTENIMIENTO V2.0                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ESTRUCTURA DE TABLAS Y RELACIONES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      ğŸ”‘ ROLES            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK  id_rol               â”‚â”€â”€â”€â”€â”€â”€â”
    â”‚     nombre_rol           â”‚      â”‚
    â”‚     descripcion          â”‚      â”‚
    â”‚     fecha_creacion       â”‚      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                      â”‚
                                      â”‚ 1:N
                                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚     ğŸ‘¤ USUARIOS           â”‚      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
    â”‚ PK  id_usuario           â”‚â—„â”€â”€â”€â”€â”€â”˜
    â”‚     nombre               â”‚
    â”‚     email                â”‚
    â”‚     numero_telefono      â”‚
    â”‚     password_hash        â”‚
    â”‚ FK  id_rol               â”‚
    â”‚     activo               â”‚
    â”‚     fecha_creacion       â”‚
    â”‚     fecha_actualizacion  â”‚
    â”‚     ultimo_acceso        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 1:N (creado_por)
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                ğŸ” INSPECCIONES                                â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK  id_inspeccion                                            â”‚
    â”‚     nombre_inspeccion                                        â”‚
    â”‚     tipo_inspeccion                                          â”‚
    â”‚     edificio, piso, ubicacion                                â”‚
    â”‚                                                              â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚ â”‚  CAMPOS ESPECÃFICOS POR TIPO:                        â”‚    â”‚
    â”‚ â”‚                                                       â”‚    â”‚
    â”‚ â”‚  â€¢ Cubierta de Techos (lÃ¡mina, hojalaterÃ­a, etc.)   â”‚    â”‚
    â”‚ â”‚  â€¢ Electricidad (iluminaciÃ³n, tomacorrientes, etc.) â”‚    â”‚
    â”‚ â”‚  â€¢ Puertas                                           â”‚    â”‚
    â”‚ â”‚  â€¢ Pisos                                             â”‚    â”‚
    â”‚ â”‚  â€¢ Pintura                                           â”‚    â”‚
    â”‚ â”‚  â€¢ Bombas de Agua                                    â”‚    â”‚
    â”‚ â”‚  â€¢ Aire Acondicionado                                â”‚    â”‚
    â”‚ â”‚  â€¢ Ventanas                                          â”‚    â”‚
    â”‚ â”‚  â€¢ Barandas                                          â”‚    â”‚
    â”‚ â”‚  â€¢ Hidro Lavados                                     â”‚    â”‚
    â”‚ â”‚  â€¢ TelefonÃ­a                                         â”‚    â”‚
    â”‚ â”‚  â€¢ Datos                                             â”‚    â”‚
    â”‚ â”‚  â€¢ Estructuras de Metal                              â”‚    â”‚
    â”‚ â”‚  â€¢ Sistemas Contra Incendios                         â”‚    â”‚
    â”‚ â”‚  â€¢ Planta ElÃ©ctrica                                  â”‚    â”‚
    â”‚ â”‚  â€¢ Motores de Portones                               â”‚    â”‚
    â”‚ â”‚  â€¢ Aceras                                            â”‚    â”‚
    â”‚ â”‚  â€¢ CordÃ³n + CaÃ±o                                     â”‚    â”‚
    â”‚ â”‚  â€¢ CÃ¡maras de Seguridad                              â”‚    â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                                              â”‚
    â”‚     observaciones                                            â”‚
    â”‚     recomendaciones                                          â”‚
    â”‚ FK  creado_por                                               â”‚
    â”‚     fecha_creacion                                           â”‚
    â”‚     fecha_actualizacion                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚
              â”‚ 1:N                     â”‚ 1:N
              â”‚                         â”‚
              â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ–¼ï¸  IMAGENES_INSPECCION â”‚   â”‚      ğŸ“‹ TAREAS          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ PK  id_imagen            â”‚   â”‚ PK  id_tarea             â”‚
    â”‚ FK  id_inspeccion â”€â”€â”€â”€â”€â”€â”€â”‚â”€â” â”‚     titulo               â”‚
    â”‚     nombre_archivo       â”‚ â”‚ â”‚     estado               â”‚
    â”‚     tipo_mime            â”‚ â”‚ â”‚       â€¢ No Iniciado ğŸ”´  â”‚
    â”‚     data_base64          â”‚ â”‚ â”‚       â€¢ En Proceso ğŸŸ¡   â”‚
    â”‚     tamaÃ±o_bytes         â”‚ â”‚ â”‚       â€¢ Finalizado ğŸŸ¢   â”‚
    â”‚     descripcion          â”‚ â”‚ â”‚     asignado_a           â”‚
    â”‚ FK  subido_por           â”‚ â”‚ â”‚     fecha                â”‚
    â”‚     fecha_subida         â”‚ â”‚ â”‚     prioridad            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚       â€¢ Alta ğŸ”´         â”‚
                                 â”‚ â”‚       â€¢ Media ğŸŸ¡        â”‚
                                 â”‚ â”‚       â€¢ Baja ğŸŸ¢         â”‚
                                 â”‚ â”‚     descripcion          â”‚
                                 â””â”€â”‚ FK  id_inspeccion        â”‚
                                   â”‚ FK  creado_por           â”‚
                                   â”‚     fecha_creacion       â”‚
                                   â”‚     fecha_actualizacion  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”„ FLUJO DE TRABAJO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. INICIO DE SESIÃ“N
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Usuario ingresa email + password
              â”‚
              â–¼
   SP_autenticar_usuario(@email)
              â”‚
              â–¼
   Validar password_hash con bcrypt
              â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    â”‚
             âœ“                    âœ—
              â”‚                    â”‚
              â–¼                    â–¼
      Retornar datos         Error 401
      del usuario +
      rol asignado


2. CREAR INSPECCIÃ“N
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Usuario completa formulario de inspecciÃ³n
   (llena solo los campos del tipo de inspecciÃ³n)
              â”‚
              â–¼
   SP_crear_inspeccion(...)
              â”‚
              â–¼
   INSERT INTO inspecciones
              â”‚
              â–¼
   Retorna id_inspeccion
              â”‚
              â–¼
   Â¿Hay imÃ¡genes para subir?
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â”‚           â”‚
       SÃ          NO
        â”‚           â”‚
        â–¼           â”‚
   Subir imÃ¡genes   â”‚
   en base64        â”‚
        â”‚           â”‚
        â–¼           â–¼
   INSERT INTO      Fin
   imagenes_inspeccion


3. CREAR TAREA
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Usuario crea tarea
   (puede vincular a inspecciÃ³n o no)
              â”‚
              â–¼
   SP_crear_tarea(...)
              â”‚
              â–¼
   INSERT INTO tareas
   estado = 'No Iniciado'
              â”‚
              â–¼
   Retorna id_tarea


4. ACTUALIZAR TAREA
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Usuario cambia estado o asignaciÃ³n
              â”‚
              â–¼
   SP_actualizar_tarea(...)
              â”‚
              â–¼
   UPDATE tareas
   SET estado = nuevo_estado
              â”‚
              â–¼
   Trigger TR_tareas_update
   actualiza fecha_actualizacion


5. VISUALIZAR DASHBOARD
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Dashboard solicita estadÃ­sticas
              â”‚
              â–¼
   SELECT * FROM VW_estadisticas_tareas
              â”‚
              â–¼
   Mostrar grÃ¡ficos:
   â€¢ Tareas por estado (grÃ¡fica de barras)
   â€¢ Tareas por prioridad (grÃ¡fica circular)
   â€¢ Progreso general


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ EJEMPLO DE DATOS - TABLA INSPECCIONES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

INSPECCIÃ“N DE ELECTRICIDAD:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id_inspeccion: 1                                                   â”‚
â”‚ nombre_inspeccion: "InspecciÃ³n ElÃ©ctrica - Edificio A"            â”‚
â”‚ tipo_inspeccion: "Electricidad"                                   â”‚
â”‚ edificio: "Edificio A"                                             â”‚
â”‚ piso: "Planta Baja"                                                â”‚
â”‚ ubicacion: "Oficina 101"                                           â”‚
â”‚                                                                    â”‚
â”‚ iluminacion_ubicacion: "interna"                                  â”‚
â”‚ iluminacion_bombillo: "LED"                                       â”‚
â”‚ iluminacion_tipo_luz: "luz blanca"                                â”‚
â”‚ iluminacion_watts: 12                                              â”‚
â”‚ iluminacion_apagador_marca: "Leviton"                             â”‚
â”‚ iluminacion_apagador_tipo: "doble"                                â”‚
â”‚                                                                    â”‚
â”‚ tomacorriente_tipo: "doble"                                       â”‚
â”‚ tomacorriente_voltaje: "110v"                                     â”‚
â”‚ tomacorriente_polarizado: 1 (true)                                â”‚
â”‚ tomacorriente_ubicacion: "interno"                                â”‚
â”‚ tomacorriente_seguridad: "GFCI"                                   â”‚
â”‚                                                                    â”‚
â”‚ (todos los demÃ¡s campos NULL porque no aplican)                   â”‚
â”‚                                                                    â”‚
â”‚ observaciones: "Todo funcionando correctamente"                   â”‚
â”‚ recomendaciones: "Revisar en 3 meses"                             â”‚
â”‚ creado_por: 1                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


INSPECCIÃ“N DE AIRE ACONDICIONADO:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id_inspeccion: 2                                                   â”‚
â”‚ nombre_inspeccion: "Mantenimiento AC - Sala Principal"            â”‚
â”‚ tipo_inspeccion: "Aire Acondicionado"                             â”‚
â”‚ edificio: "Edificio B"                                             â”‚
â”‚ piso: "Piso 1"                                                     â”‚
â”‚ ubicacion: "Sala de Juntas"                                        â”‚
â”‚                                                                    â”‚
â”‚ ac_tipo: "mini split"                                              â”‚
â”‚ ac_capacidad_btu: 12000                                            â”‚
â”‚ ac_gas_refrigerante: "R410A"                                       â”‚
â”‚ ac_limpieza_filtros: 0 (false - necesita limpieza)                â”‚
â”‚ ac_limpieza_serpentines: 0 (false - necesita limpieza)            â”‚
â”‚ ac_nivel_gas: "Adecuado"                                           â”‚
â”‚ ac_estado_drenaje: "Limpio"                                        â”‚
â”‚ ac_estado_control_remoto: "Funcional"                             â”‚
â”‚ ac_ruido_vibracion: "Sin ruidos anormales"                        â”‚
â”‚ ac_consumo_electrico: "Normal"                                     â”‚
â”‚                                                                    â”‚
â”‚ (todos los demÃ¡s campos NULL porque no aplican)                   â”‚
â”‚                                                                    â”‚
â”‚ observaciones: "Filtros muy sucios, requiere limpieza urgente"   â”‚
â”‚ recomendaciones: "Limpiar filtros inmediatamente"                 â”‚
â”‚ creado_por: 1                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š EJEMPLO DE DATOS - TABLA TAREAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID  â”‚ TÃ­tulo                       â”‚ Estado       â”‚ Asignado     â”‚ Fecha      â”‚ Prioridad â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ Revisar sistema elÃ©ctrico    â”‚ No Iniciado  â”‚ Juan PÃ©rez   â”‚ 2025-10-19 â”‚ Alta ğŸ”´  â”‚
â”‚     â”‚ principal                    â”‚     ğŸ”´       â”‚              â”‚            â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2   â”‚ Limpiar filtros de AC        â”‚ En Proceso   â”‚ MarÃ­a        â”‚ 2025-10-19 â”‚ Media ğŸŸ¡ â”‚
â”‚     â”‚                              â”‚     ğŸŸ¡       â”‚ GonzÃ¡lez     â”‚            â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3   â”‚ Pintar fachada principal     â”‚ No Iniciado  â”‚ Carlos       â”‚ 2025-10-26 â”‚ Baja ğŸŸ¢  â”‚
â”‚     â”‚                              â”‚     ğŸ”´       â”‚ RodrÃ­guez    â”‚            â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4   â”‚ Reparar puerta de emergencia â”‚ Finalizado   â”‚ Juan PÃ©rez   â”‚ 2025-10-17 â”‚ Alta ğŸ”´  â”‚
â”‚     â”‚                              â”‚     ğŸŸ¢       â”‚              â”‚            â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5   â”‚ Mantenimiento bomba de agua  â”‚ En Proceso   â”‚ Carlos       â”‚ 2025-10-19 â”‚ Alta ğŸ”´  â”‚
â”‚     â”‚                              â”‚     ğŸŸ¡       â”‚ RodrÃ­guez    â”‚            â”‚           â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” CONTROL DE ACCESO POR ROL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROL                â”‚ PERMISOS                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘‘ ADMINISTRADOR   â”‚ â€¢ Crear, editar, eliminar usuarios                      â”‚
â”‚                    â”‚ â€¢ Crear, editar, eliminar inspecciones                  â”‚
â”‚                    â”‚ â€¢ Crear, editar, eliminar tareas                        â”‚
â”‚                    â”‚ â€¢ Ver todas las tareas de todos los usuarios            â”‚
â”‚                    â”‚ â€¢ Acceso completo al dashboard                          â”‚
â”‚                    â”‚ â€¢ Subir y eliminar imÃ¡genes                             â”‚
â”‚                    â”‚ â€¢ Generar reportes                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ USUARIO         â”‚ â€¢ Ver su perfil                                          â”‚
â”‚                    â”‚ â€¢ Crear inspecciones                                     â”‚
â”‚                    â”‚ â€¢ Crear tareas                                           â”‚
â”‚                    â”‚ â€¢ Editar solo sus propias tareas                         â”‚
â”‚                    â”‚ â€¢ Ver solo tareas asignadas a Ã©l                         â”‚
â”‚                    â”‚ â€¢ Subir imÃ¡genes a sus inspecciones                     â”‚
â”‚                    â”‚ â€¢ Ver dashboard limitado (solo sus datos)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š VISTAS ÃšTILES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

VW_tareas_completas
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Muestra todas las tareas con informaciÃ³n completa incluyendo:
â€¢ Datos de la tarea
â€¢ InformaciÃ³n de la inspecciÃ³n relacionada (si existe)
â€¢ Datos del usuario creador
â€¢ Conteo de imÃ¡genes

Uso: SELECT * FROM VW_tareas_completas WHERE estado = 'En Proceso';


VW_estadisticas_tareas
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Agrupa estadÃ­sticas por estado de tarea:
â€¢ Total de tareas por estado
â€¢ Cantidad de tareas por prioridad en cada estado

Uso: SELECT * FROM VW_estadisticas_tareas;


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ PROCEDIMIENTOS ALMACENADOS PRINCIPALES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. SP_autenticar_usuario(@email)
   â†’ Autentica usuario y retorna datos + rol

2. SP_crear_inspeccion(@nombre_inspeccion, @tipo_inspeccion, @creado_por, @id_inspeccion_nueva OUTPUT)
   â†’ Crea nueva inspecciÃ³n y retorna ID

3. SP_crear_tarea(@titulo, @estado, @asignado_a, @fecha, @prioridad, ..., @id_tarea_nueva OUTPUT)
   â†’ Crea nueva tarea y retorna ID

4. SP_actualizar_tarea(@id_tarea, @titulo, @estado, @asignado_a, @fecha, @prioridad, ...)
   â†’ Actualiza tarea existente

5. SP_obtener_tareas()
   â†’ Obtiene todas las tareas ordenadas por estado y prioridad


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš¡ TRIGGERS AUTOMÃTICOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

TR_usuarios_update
   â†’ Actualiza automÃ¡ticamente fecha_actualizacion en usuarios

TR_inspecciones_update
   â†’ Actualiza automÃ¡ticamente fecha_actualizacion en inspecciones

TR_tareas_update
   â†’ Actualiza automÃ¡ticamente fecha_actualizacion en tareas


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ CARACTERÃSTICAS CLAVE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Sistema de roles separado (tabla dedicada)
âœ… Usuarios con nombre, email, telÃ©fono y rol
âœ… Inspecciones con campos especÃ­ficos para 19 tipos diferentes
âœ… ImÃ¡genes guardadas en base64 relacionadas con inspecciones
âœ… Tareas con estados visuales (colores) y prioridades
âœ… Relaciones opcionales entre tareas e inspecciones
âœ… Triggers automÃ¡ticos para auditorÃ­a
âœ… Vistas para consultas complejas
âœ… Procedimientos almacenados para operaciones comunes
âœ… Ãndices para optimizaciÃ³n de consultas

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Diagrama creado para: Planificador de Mantenimiento V2.0
Fecha: Octubre 2025
Compatible con: SQL Server 2016+

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

